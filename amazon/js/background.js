chrome.runtime.onInstalled.addListener((function(e){"update"===e.reason&&console.log("chrome extension update success")})),chrome.pageAction.onClicked.addListener((function(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{info:"send-content"},(function(e){console.log("bg=>content"),console.log(e)}))}))})),chrome.runtime.onInstalled.addListener((function(){chrome.declarativeContent.onPageChanged.removeRules(void 0,(function(){chrome.declarativeContent.onPageChanged.addRules([{conditions:[new chrome.declarativeContent.PageStateMatcher({pageUrl:{urlContains:"amazon.com"}})],actions:[new chrome.declarativeContent.ShowPageAction]}])}))})),chrome.runtime.onMessage.addListener((function(e,n,t){switch(e.type){case"get":fetch(e.url).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return t(null)}));break;case"post":return fetch(e.url,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json; charset=utf-8",token:e.data.token?e.data.token:""},body:JSON.stringify(e.data)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return t(null)})),!0;case"test":t({msg:"test"})}}));